<html>
<head>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script type="text/javascript" src="sample.js"></script>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<h1>Greasy App</h1>
	<p>Hi {{firstName}}.</p>
	<h2>Attendance</h2>
	<p>Right now you have a {{score}} in Glee Club.</p>
	<svg></svg>
</body>
<script type="text/javascript">
	var svg = d3.select("svg");
	var margin = {
		"top":20,
		"right":20,
		"bottom":20,
		"left":20
	};
	var width = window.innerWidth - margin.left - margin.right;
	var height = window.innerHeight - margin.top - margin.bottom;
	svg.attr("width", width)
		.attr("height", height);
	// sampleData.attendance.forEach(function (d){
	// 	d.date = new Date(d.date*1000);
	// });
	// var timeFormat = d3.timeFormat("%b %e").parse;

	// var x = d3.scaleTime()
	// 	.rangeRound([0, width]);
	// var y = d3.scaleLinear()
	// 	.rangeRound([height, 0]);
	// var line = d3.line()
	// 	.x(function(d) { return x(d.date); })
	// 	.y(function(d) {
	// 		if(d.partialScore < 1) return 0
	// 		else return y(d.partialScore);
	// 	});

	// x.domain(d3.extent(sampleData.attendance, function(d) { return d.date; }));
	// y.domain([0, d3.max(sampleData.attendance, function(d) { return d.partialScore; })]);

	// svg.append("path")
 //      .data([sampleData])
 //      .attr("class", "line")
 //      .attr("d", line);

 	// set the ranges
 	var x = d3.scaleTime().range([0, width]);
 	var y = d3.scaleLinear().range([height, 0]);

 	var parseTime = d3.timeParse("%d-%b-%y");

 	sampleData.attendance.forEach(function (d){
		d.date = new Date(d.date*1000);
		d.date = parseTime(d.date);
	});

	// Scale the range of the data
	x.domain(d3.extent(sampleData.attendance, function(d) { return d.date; }));
	y.domain([0, 100]);

 	var valueline = d3.line()
 	    .x(function(d) { return x(d.date); })
 	    .y(function(d) { return y(d.partialScore); });

	// console.log(sampleData.attendance);

	// Add the valueline path.
	  svg.append("path")
	      .data([sampleData])
	      .attr("class", "line")
	      .attr("d", valueline);


</script>
</html>